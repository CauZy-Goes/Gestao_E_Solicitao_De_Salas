<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Gestão De Salas</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <style>
        /* Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        body{
            font-family: "Trebuchet MS", sans-serif;
            background: dodgerblue;
            height: 100vh;
        }

        /*headder*/
        header {
            background-color: darkblue;
            width: 100%;
            height: 7%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-apresentacao {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 65%;
      }

        .header-apresentacao h1 {
            color: darkgrey;
            font-size: 35px;
        }

        .header-links{
            display: flex;
            justify-content: space-around;
            align-items: center ;
            width: 25%;
        }

        .header-links .ui-button {
            background-color: white !important;
            color: darkblue !important;
            font-weight: bold !important;
            font-size: 20px !important;
            box-shadow: 0 0 5px dodgerblue!important;
            border-radius: 10px;
            transition: background-color 0.3s ease-in-out;
        }

        .header-links .ui-button:hover {
            background-color: rgba(18, 159, 218, 0.89) !important;
            color: black !important;
        }

        .header-utils{
            width: 10%;
            display: flex;
            justify-content: center;
            gap: 10px;
            align-items: center ;
        }

        .header-utils .bt-settings {
            background-color: gray;
        }

        .header-utils .bt-settings:hover {
            background-color: yellow;
            color: black;
        }

        .header-utils .bt-log-out{
            background-color: rgba(255, 0, 0, 0.44);
            color: black;
        }

        .header-utils .bt-log-out:hover {
            background-color: black;
            color: white;
        }
    </style>
</h:head>

<h:body>

    <header id="header">

        <div class="header-apresentacao">
            <div>
                <h1>DashBoard Do <span style="color: white; font-size: 40px;">#{cargoMB.getNomeCargoById(usuarioMB.usuarioLogado.idCargo)}</span></h1>
            </div>

            <h:panelGroup id="user-info">
                <h1>Bem-vindo, <span style="color: white; font-size: 40px;"> #{usuarioMB.usuarioLogado.nomeUsuario} !</span></h1>
            </h:panelGroup>
        </div>

<!--        <p:commandButton value="Minhas Solicitações"-->
<!--                         rendered="#{usuarioMB.usuarioLogado.idCargo == 2}"/>-->

        <h:form styleClass="header-links">
                <div>
                    <p:commandButton value="Dashboard"
                                     icon="pi pi-home"
                                     rendered="#{usuarioMB.usuarioLogado.idCargo == 1}"
                                     action="/pages/gestor/dashboardGestor.xhtml?faces-redirect=true" />
                </div>

                <div>
                    <p:commandButton value="Gestão De Salas"
                                     icon="pi pi-th-large"
                                     rendered="#{usuarioMB.usuarioLogado.idCargo == 1}"
                                     action="/pages/gestor/salas.xhtml?faces-redirect=true" />
                </div>
        </h:form>


        <h:form id="form_update" styleClass="header-utils">
            <!-- Botão que abre o modal -->
            <p:commandButton icon="pi pi-wrench" actionListener="#{usuarioMB.prepararEdicao()}" styleClass="bt-settings"
                             oncomplete="PF('popupUpdate').show()" update="popupUpdate @form" process="@this"/>

            <!-- Dialog que serve como popup -->
            <p:dialog id="popupUpdate"  widgetVar="popupUpdate" header="Update Perfil"
                      modal="true" resizable="false" width="400">

                <h:panelGrid columns="2" cellpadding="5">

                    <p:outputLabel for="nome" value="Nome:" />
                    <p:inputText id="nome" value="#{usuarioMB.usuarioDTO.nomeUsuario}" required="true"/>

                    <p:outputLabel for="email" value="E-mail:" />
                    <p:inputText id="email" value="#{usuarioMB.usuarioDTO.email}" required="true"/>

                    <p:outputLabel for="senha" value="Senha :"/>
                    <p:inputText id="senha" value="#{usuarioMB.usuarioDTO.senha}"  required="true"/>


                    <p:messages autoUpdate="true" id="message_update"/>
                    <p:commandButton value="Salvar" icon="pi pi-save" actionListener="#{usuarioMB.updateUser}"
                                     oncomplete="PF('popupUpdate').show()" update="user-info message_update"
                                     styleClass="bt-settings"/>
                </h:panelGrid>
            </p:dialog>

            <p:commandButton icon="pi pi-sign-out" action="#{usuarioMB.logout()}" styleClass="bt-log-out" update="@form" process="@this"/>
        </h:form>
    </header>

    <ui:insert name="corpo"/>

</h:body>

</html>