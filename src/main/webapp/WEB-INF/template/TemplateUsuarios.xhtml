<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Gestão De Salas</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <style>
        /* Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        body{
            font-family: "Trebuchet MS", sans-serif;
            height: 100vh;
        }

        .custom-messages {
            width: auto;
            margin: 0 auto; /* Centraliza horizontalmente */
            padding: 10px; /* Adiciona um pouco de espaço interno */
            background-color: #f9f9f9; /* Cor de fundo */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Sombra */
        }


        /*headder*/
        header {
            background-color: darkblue;
            width: 100%;
            height: 7%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /*apresentacao da dashboard e do usuario*/
        .header-apresentacao {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 65%;
      }

        .header-apresentacao h1 {
            color: darkgrey;
            font-size: 35px;
        }

        /*links de navegação do gestor*/
        .header-links{
            display: flex;
            justify-content: space-around;
            align-items: center ;
            width: 25%;
        }

        .header-links .ui-button {
            background-color: white !important;
            color: darkblue !important;
            font-weight: bold !important;
            font-size: 20px !important;
            box-shadow: 0 0 5px dodgerblue!important;
            border-radius: 10px;
            transition: background-color 0.3s ease-in-out;
        }

        .header-links .ui-button:hover {
            background-color: rgba(18, 159, 218, 0.89) !important;
            color: black !important;
        }

        /*area de login e update de usuario*/
        .header-utils{
            width: 10%;
            display: flex;
            justify-content: center;
            gap: 10px;
            align-items: center ;
        }

        /*    pop pup*/
        .header-settings {
            width: 450px;
            padding: 20px;
            border-radius: 10px; /* Borda arredondada */
        }

        .ui-dialog .ui-dialog-title{
            width: 100%;
            text-align: center;
            font-size: 25px;
            font-weight: bold;
            color: black;
        }

        .header-settings-panel {
            width: 100%;
            height: 100%;
        }

        .header-settings-panel .ui-outputlabel {
            font-size: 23px; !important;
            font-weight: bold;
        }

        .input-descricao{
            font-size: 23px; !important;
            width: 100%;
            height: 100%;
            margin: 20px 0;
        }

        .input-descricao:focus {
            border-color: darkblue !important;
            box-shadow: 0 0 5px dodgerblue !important;
        }

        .input-descricao:hover {
            border-color: darkblue !important;
            box-shadow: 0 0 5px dodgerblue !important;
        }

        .header-settings-panel .form-panel input {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(18, 159, 218, 0.89);
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease-in-out;
        }

        .header-settings-panel .form-panel input:focus {
            border-color: darkblue !important;
            box-shadow: 0 0 5px dodgerblue !important;
        }

        .header-settings-panel input:hover {
            border-color: darkblue !important;
            box-shadow: 0 0 5px dodgerblue !important;
        }

        .header-log {
            width: 60%;
            padding: 0;
            border-radius: 10px; /* Borda arredondada */
        }

        .header-log .ui-dialog-title{
            width: 100%;
            text-align: center;
            font-size: 45px !important;
            font-weight: bold;
            color: white;
        }

        .header-log-panel .ui-outputlabel {
            font-size: 23px !important;
            font-weight: bold;
        }

        .header-log .ui-dialog-titlebar {
            background-color: darkblue !important;
            color: white !important;
            text-align: center !important;
            font-weight: bold;
            font-size: 45px !important;
        }

        .header-log .ui-dialog-title {
            width: 100%;
            display: block;
            text-align: center !important;
            font-size: 45px !important;
            font-weight: bold;
            color: white;
        }

        /*form de casdastro dos usuarios*/

        .form-cadastro {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            width: 100%;
            align-items: center;
        }

        .form-cadastro-panel {
            width: 700px;
            margin: 20px 0;
            padding: 10px;
            box-shadow: 0 0 5px 2px darkblue !important;
        }

        .form-cadastro .ui-outputlabel {
            font-size: 23px; !important;
            font-weight: bold !important;
        }

        .form-cadastro-panel input {
            width: 100% !important;
            padding: 10px !important;
            border: 2px solid dodgerblue;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease-in-out;
        }

        .form-cadastro-panel  input:focus {
            border-color: darkblue !important;
            box-shadow: 0 0 5px darkblue!important;
        }

        .form-cadastro-panel input:hover {
            border-color: darkblue !important;
            box-shadow: 0 0 5px darkblue!important;
        }

        .form-cadastro .ui-selectonemenu{
            width: 100%;
            padding: 10px;
            border: 2px solid dodgerblue;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease-in-out;
        }

        .form-cadastro .ui-selectonemenu:focus,
        .form-cadastro .ui-selectonemenu:hover,
        .form-cadastro .ui-selectonemenu.ui-selectonemenu-open {
            border-color: darkblue !important;
            box-shadow: 0 0 5px darkblue!important;
        }

        /*datatable*/

        .ui-database {
            margin: 10px 0 15px;
        }

        /* Estilo para os cabeçalhos das colunas */
        .ui-datatable th {
            font-size: 30px !important;
            color: white !important;
            font-weight: bold !important;
            background-color: darkblue !important;
            text-align: center !important;
            vertical-align: middle !important;
            height: 100% !important;
        }

        /* Estilo para as células da tabela */
        .ui-datatable td {
            background-color: white !important;
            text-align: center !important;  /* Centraliza o texto horizontalmente */
            vertical-align: middle !important; /* Centraliza verticalmente */
        }

        .ui-datatable td {
            text-align: center;
        }

        /* Estilo para as células da tabela */
        .ui-datatable td .ui-outputlabel {
            font-size: 20px; !important;
            font-weight: bold !important;
            text-align: center !important;
        }

        /* Estilo para o cabeçalho principal */
        .ui-datatable thead {
            background-color: darkblue !important;
            height: 100% !important;
        }

        .ui-datatable thead th {
            height: 100% !important;
            font-size: 30px !important;
            color: white !important;
            font-weight: bold !important;
        }

        /* Estilo do paginator */
        .ui-database .ui-paginator {
            background-color: white !important; /* Cor de fundo do paginator */
            padding: 10px !important; /* Espaçamento interno */
        }

        /* Estilo dos botões do paginator */
        .ui-database .ui-paginator .ui-paginator-button {
            background-color: darkblue !important; /* Cor de fundo dos botões */
            color: white !important; /* Cor do texto dos botões */
            border: none !important; /* Sem borda */
            padding: 5px 10px !important; /* Espaçamento interno dos botões */
            margin: 0 5px !important; /* Margem entre os botões */
            transition: background-color 0.3s !important; /* Efeito de transição */
        }

        /* Estilo dos botões do paginator ao passar o mouse */
        .ui-database .ui-paginator .ui-paginator-button:hover {
            background-color: #ffffff !important ;/* Cor de fundo ao passar o mouse */
            color: #00008f !important;
        }

        /* Estilo do paginator quando está desativado */
        .ui-database .ui-paginator .ui-paginator-button.ui-state-disabled {
            background-color: #ccc !important; /* Cor de fundo dos botões desativados */
            color: #666 !important; /* Cor do texto dos botões desativados */
        }

        /* Estiliza apenas a linha da célula específica */
        .ui-datatable tbody tr .coluna_rowEditor {
            background-color: #f5f5f5; /* Cor de fundo para diferenciar */
            border: 1px solid #ccc; /* Adiciona borda */
            display: flex;
            align-items: center;
            justify-content: space-around;
            height: 100% !important;
        }

        /* Define o tamanho e cores dos ícones do rowEditor */
        .custom-table .ui-row-editor {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            padding: 0;
            margin: 0;
        }

        /* Ícones de edição, salvar e cancelar */
        .custom-table .ui-row-editor .ui-icon-pencil {
            color: black !important;
            background-color: yellow !important;
            width: 40px !important;
            height: 40px !important;
            border-radius: 5px;
            padding: 0;
            margin: 0;
            border: solid 1px darkblue !important;
        }

        .custom-table .ui-row-editor .ui-icon-pencil:hover {
            color: yellow !important;
            background-color: white !important;
        }

        .custom-table .ui-row-editor .ui-icon-check {
            color: black !important; /* Cor do ícone de salvar */
            background-color: green !important;
            width: 40px !important;
            height: 40px !important;
            border-radius: 5px;
            padding: 0;
            margin: 0;
            border: solid 1px darkblue !important;
        }

        .custom-table .ui-row-editor .ui-icon-check:hover {
            color: green !important;
            background-color: white !important;
        }

        .custom-table .ui-row-editor .ui-icon-close {
            color: black !important;
            background-color: rgba(255, 0, 0, 0.68) !important;
            width: 40px !important;
            height: 40px !important;
            border-radius: 5px;
            padding: 0;
            margin: 0;
            border: solid 1px darkblue !important;
        }

        .custom-table .ui-row-editor .ui-icon-close:hover {
            background-color: white !important;
            color: red !important;
        }

        /* Estilizar o input do filtro das colunas */
        .ui-column-filter {
            width: 60% !important;
            font-size: 20px !important;
            padding: 2px 5px !important;
            border: 2px solid dodgerblue !important;
            border-radius: 5px !important;
            transition: border-color 0.3s ease-in-out !important;
        }

        .ui-column-filter input {
            width: 100% !important;
            padding: 10px !important;
            border: 2px solid dodgerblue;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease-in-out;
        }

        .ui-column-filter:focus {
            border-color: darkblue !important;
            box-shadow: 0 0 5px darkblue!important;
        }

        .ui-column-filter:hover {
            border-color: darkblue !important;
            box-shadow: 0 0 5px darkblue!important;
        }

        .filter-select {
            width: 60% !important;
            font-size: 20px !important;
            padding: 2px 5px !important;
            border: 2px solid dodgerblue !important;
            border-radius: 5px !important;
            transition: border-color 0.3s ease-in-out !important;
        }

        .filter-select:focus,
        .filter-select:hover {
            border-color: darkblue !important;
            box-shadow: 0 0 5px darkblue!important;
        }


        /*table view*/
        /*Tab View*/
        .tabview-usuarios {
            margin: 15px 0 0 !important;
            background: white; !important;
            border-radius: 25px; !important;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            width: 100%;
        }

        .tabview-usuarios .ui-tabs-nav {
            display: flex;
            width:  700px;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin: 0;
            gap: 130px;
        }

        .tabview-usuarios .ui-tabs-nav li {
            font-size: 35px !important;
            padding: 5px 10px !important;
            font-weight: bold !important;
            color: dodgerblue !important;
            border: none;
        }

        .tabview-usuarios .ui-tabs-nav li:focus {
            border-color: darkblue;
            box-shadow: 0 0 5px 5px darkblue;
        }

        .tabview-usuarios .ui-tabs-nav li:hover {
            border-bottom: darkblue 5px solid !important;
            cursor: pointer;
        }

        .tabview-usuarios .ui-tabs-nav li:hover {
            color: #00c7d9 !important;
        }

        .tabview-usuarios .ui-tabs-nav li.ui-state-active {
            border-bottom: 5px solid darkblue !important;
        }

        .tabview-usuarios .ui-tabs-nav li.ui-state-active a{
            color: darkblue !important;
            font-weight: bold !important;
        }

        /*buttons*/

        .container-bt{
            display: flex; width: 100%; justify-content: space-around; align-items: center
        }

        .bt-create {
            height: 50px !important;
            width: 220px !important;
            background-color: darkblue !important;
            font-weight: bold !important;
            font-size: 20px !important;
            border: none !important;
            border-radius: 10px;
            transition: background-color 0.3s ease-in-out;
        }

        .bt-create:hover {
            background-color: white !important;
            color: darkblue !important;
            border: darkblue 3px solid !important;
        }

        .bt-settings {
            background-color: yellow !important;
            color: black !important;
        }

        .bt-settings:hover {
            background-color: gray !important;
        }

        .bt-log-out{
            background-color: rgba(255, 0, 0, 0.68) !important;
            color: black !important;
        }

        .bt-log-out:hover {
            background-color: white !important;
            color: red !important;
        }

        .bt-accept{
            background-color: green !important;
            color: white !important;
        }

        .bt-accept:hover{
            background-color: white !important;
            color: green !important;
        }

        .bt-log {
            background-color: white !important;
            color: darkblue !important;
        }

        .bt-log:hover {
            background-color: rgba(18, 159, 218, 0.89) !important;
            color: black !important;
        }
    </style>
</h:head>

<h:body>

    <header id="header">

        <div class="header-apresentacao">
            <div>
                <h1>DashBoard Do <span style="color: white; font-size: 40px;">#{cargoMB.getNomeCargoById(usuarioMB.usuarioLogado.idCargo)}</span></h1>
            </div>

            <h:panelGroup id="user-info">
                <h1>Bem-vindo, <span style="color: white; font-size: 40px;"> #{usuarioMB.usuarioLogado.nomeUsuario} !</span></h1>
            </h:panelGroup>
        </div>

<!--        <p:commandButton value="Minhas Solicitações"-->
<!--                         rendered="#{usuarioMB.usuarioLogado.idCargo == 2}"/>-->

        <h:form styleClass="header-links">
                <div>
                    <p:commandButton value="Dashboard"
                                     icon="pi pi-home"
                                     rendered="#{usuarioMB.usuarioLogado.idCargo == 1}"
                                     action="/pages/gestor/dashboardGestor.xhtml?faces-redirect=true" />
                </div>

                <div>
                    <p:commandButton value="Usuários"
                                     icon="pi pi-user-edit"
                                     rendered="#{usuarioMB.usuarioLogado.idCargo == 1}"
                                     action="/pages/gestor/usuario.xhtml?faces-redirect=true" />
                </div>

                <div>
                    <p:commandButton value="Salas"
                                     icon="pi pi-th-large"
                                     rendered="#{usuarioMB.usuarioLogado.idCargo == 1}"
                                     action="/pages/gestor/salas.xhtml?faces-redirect=true" />
                </div>
        </h:form>


        <h:form id="form_update" styleClass="header-utils">
            <!-- Botão que abre o modal -->
            <p:commandButton icon="pi pi-user" actionListener="#{usuarioMB.prepararEdicao()}" styleClass="bt-settings"
                             oncomplete="PF('popupUpdate').show()" update="popupUpdate @form" process="@this"/>

            <!-- Dialog que serve como popup -->
            <p:dialog id="popupUpdate"  widgetVar="popupUpdate" header="Update Perfil"
                      modal="true" resizable="false" styleClass="header-settings">

                <h:panelGrid columns="2" cellpadding="5" styleClass="header-settings-panel">

                    <p:outputLabel for="nome" value="Nome:" />
                    <p:inputText id="nome" value="#{usuarioMB.usuarioDTO.nomeUsuario}" required="true"/>

                    <p:outputLabel for="email" value="E-mail:" />
                    <p:inputText id="email" value="#{usuarioMB.usuarioDTO.email}" required="true"/>

                    <p:outputLabel for="senha" value="Senha :"/>
                    <p:inputText id="senha" value="#{usuarioMB.usuarioDTO.senha}"  required="true"/>


                    <p:messages autoUpdate="true" id="message_update"/>
                    <p:commandButton value="Salvar" icon="pi pi-save" actionListener="#{usuarioMB.updateUser}"
                                     oncomplete="PF('popupUpdate').show()" update="user-info message_update"
                                     styleClass="bt-create"/>
                </h:panelGrid>
            </p:dialog>

            <!-- Botão que abre o menu de logs -->
            <p:commandButton icon="pi pi-history" actionListener="#{logAcoesMB.init()}" styleClass="bt-log"
                             oncomplete="PF('popupLogAcoes').show()" update="popupLogAcoes @form"
                             process="@this"  rendered="#{usuarioMB.usuarioLogado.idCargo == 1}"/>

            <p:dialog id="popupLogAcoes"  widgetVar="popupLogAcoes" header="Lista De Logs"
                      modal="true" resizable="false" styleClass="header-log"
                      width="80%" height="80%" style="width: 100%; border: 5px solid darkblue;">

                <p:dataTable value="#{logAcoesMB.logAcoesDTOList}" var="log" id="tabela_log" paginator="true"
                             paginatorPosition="top" rows="40" style="width: 100%;"
                             scrollable="true" scrollHeight="600"  widgetVar="tabelaSolicitacaoWV"
                             >

                    <p:column headerText="Id" sortBy="#{log.idLogAcoes}" sortOrder="desc" style="width: 5%">
                        <p:outputLabel value="#{log.idLogAcoes}"/>
                    </p:column>

                    <p:column headerText="Nome Do Usuario" filterPlaceholder="Filtre Pela nome do usuário"
                              filterBy="#{usuarioMB.getNomeUsuarioById(log.idUsuario)}"
                              filterMatchMode="contains">
                        <p:outputLabel value="#{usuarioMB.getNomeUsuarioById(log.idUsuario)}"/>
                    </p:column>

                    <p:column headerText="Ação" filterPlaceholder="Filtre Pela Acão "
                              filterBy="#{log.acao}" filterMatchMode="contains">
                        <p:outputLabel value="#{log.acao}"/>
                    </p:column>

                    <p:column headerText="Data/Hora da Ação" field="dataHora" filterMatchMode="between" filterBy="#{log.dataHora}">
                        <f:facet name="filter">
                            <p:datePicker selectionMode="range" onchange="PF('tabelaSolicitacaoWV').filter()" pattern="dd/MM/yyyy HH:mm"
                                          showTime="true" timeInput="true"/>
                        </f:facet>

                        <p:outputLabel value="#{utils.dataHoraFormatada(log.dataHora)}"/>
                    </p:column>
                </p:dataTable>
            </p:dialog>

            <p:commandButton icon="pi pi-sign-out" action="#{usuarioMB.logout()}" styleClass="bt-log-out" update="@form" process="@this"/>
        </h:form>
    </header>

    <ui:insert name="corpo"/>

</h:body>

</html>